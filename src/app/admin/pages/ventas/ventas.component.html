<section class="text-neutral-800 dark:text-neutral-200 min-h-screen py-8">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">

        <header class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
            <div>
                <h1 class="text-2xl md:text-3xl font-bold">Ventas</h1>
                <p class="text-sm text-neutral-600 dark:text-neutral-400">Resumen de ingresos y transacciones.</p>
            </div>
            <div class="flex flex-col sm:flex-row gap-3">
                <div class="flex items-center gap-2">
                    <label class="text-sm">Desde</label>
                    <input type="date" [(ngModel)]="fechaInicio"
                        class="rounded-xl border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 text-sm">
                    <label class="text-sm">Hasta</label>
                    <input type="date" [(ngModel)]="fechaFin"
                        class="rounded-xl border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 text-sm">
                    <button (click)="aplicarFiltros()"
                        class="rounded-xl px-4 py-2 text-sm font-semibold bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 hover:opacity-90">
                        Aplicar
                    </button>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 my-6">
            <div class="rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-neutral-400/60 dark:ring-neutral-800 p-5">
                <div class="text-sm text-neutral-500 dark:text-neutral-400">Venta total</div>
                <div class="mt-1 text-2xl font-bold text-emerald-600 dark:text-emerald-400">
                    {{ totalDinero | currency:'PEN':'symbol' }}
                </div>
            </div>
            <div class="rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-neutral-400/60 dark:ring-neutral-800 p-5">
                <div class="text-sm text-neutral-500 dark:text-neutral-400">Transacciones</div>
                <div class="mt-1 text-2xl font-bold">{{ totalVentas }}</div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

            <article *ngFor="let venta of ventasFiltradas"
                class="rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-neutral-400/60 dark:ring-neutral-800 p-5 flex flex-col gap-4 shadow-sm hover:shadow-md transition-all">

                <div class="flex items-start justify-between">
                    <div class="space-y-0.5">
                        <h3 class="font-semibold text-lg">#{{ venta.id }}</h3>
                        <p class="text-xs text-neutral-500 dark:text-neutral-400">
                            {{ venta.fecha | date:'dd MMM yyyy' }} · {{ venta.hora }}
                        </p>
                    </div>
                    <span
                        class="inline-flex items-center gap-2 rounded-full px-2.5 py-1 text-xs ring-1 ring-neutral-300 dark:ring-neutral-700 bg-neutral-50 dark:bg-neutral-800">
                        <span class="size-1.5 rounded-full" [ngClass]="{
            'bg-emerald-500': venta.estadoPago === 'COMPLETADO',
            'bg-red-500': venta.estadoPago === 'REEMBOLSADO'
          }">
                        </span>
                        {{ venta.estadoPago }}
                    </span>
                </div>

                <div class="grid grid-cols-2 gap-3 text-sm">
                    <div class="col-span-2">
                        <div class="text-neutral-500 dark:text-neutral-400 text-xs uppercase font-bold">Usuario</div>
                        <div class="font-medium truncate">
                            {{ venta.nombreUsuario }} {{ venta.apellidoUsuario }}
                        </div>
                        <div class="text-xs text-cyan-600 dark:text-cyan-400 truncate">
                            {{ venta.emailUsuario }}
                        </div>

                        <div>
                            <div class="text-neutral-500 dark:text-neutral-400 text-xs uppercase font-bold">Total</div>
                            <div class="font-semibold text-lg"
                                [ngClass]="{'line-through text-neutral-400': venta.estadoPago === 'REEMBOLSADO'}">
                                {{ venta.montoPagado | currency:'PEN':'symbol' }}
                            </div>
                        </div>

                        <div>
                            <div class="text-neutral-500 dark:text-neutral-400 text-xs uppercase font-bold">Método</div>
                            <div class="flex items-center gap-1.5 mt-0.5">
                                <span class="material-icons text-base text-neutral-400">
                                    {{ (venta.metodoPago === 'TARJETA') ? 'credit_card' : 'smartphone' }}
                                </span>
                                <span class="capitalize font-medium text-neutral-700 dark:text-neutral-300">
                                    {{ venta.metodoPago | titlecase }}
                                </span>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="flex items-center justify-between pt-3 border-t border-neutral-200 dark:border-neutral-800">
                    <div class="text-xs text-neutral-500 dark:text-neutral-400 truncate max-w-[150px]">
                        Pedido #{{ venta.pedidoId }}
                    </div>
                </div>

            </article>

        </div>
    </div>
</section>