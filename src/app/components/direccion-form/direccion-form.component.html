<div class="w-full sm:min-w-[450px] bg-white dark:bg-neutral-900 flex flex-col max-h-[90vh]">

    <div class="px-6 py-5 border-b border-neutral-200 dark:border-neutral-800 flex justify-between items-center">
        <h2 class="text-xl font-bold text-neutral-900 dark:text-neutral-100 flex items-center gap-2">
            <mat-icon class="text-cyan-500">place</mat-icon>
            {{ isEditMode ? 'Editar Dirección' : 'Nueva Dirección' }}
        </h2>
        <button (click)="dialogRef.close()"
            class="text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-200 transition">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <div class="p-6 overflow-y-auto">
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">

            <div class="grid grid-cols-2 gap-4">
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-neutral-500 uppercase tracking-wide">Departamento</label>
                    <div class="relative">
                        <mat-icon class="absolute left-3 top-2.5 text-neutral-400 !text-lg !w-6 !h-6 flex items-center justify-center leading-none">map</mat-icon>
                        <input type="text" formControlName="departamento" placeholder="Ej. Lima"
                            class="w-full rounded-xl border bg-neutral-50 dark:bg-neutral-800 pl-10 pr-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-cyan-400 transition-all border-neutral-300 dark:border-neutral-700">
                    </div>
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-bold text-neutral-500 uppercase tracking-wide">Provincia</label>
                    <div class="relative">
                        <mat-icon
                            class="absolute left-3 top-2.5 text-neutral-400 !text-lg !w-6 !h-6 flex items-center justify-center leading-none">location_city</mat-icon>
                        <input type="text" formControlName="provincia" placeholder="Ej. Lima"
                            class="w-full rounded-xl border bg-neutral-50 dark:bg-neutral-800 pl-10 pr-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-cyan-400 transition-all border-neutral-300 dark:border-neutral-700">
                    </div>
                </div>
            </div>

            <div class="space-y-1.5">
                <label class="text-xs font-bold text-neutral-500 uppercase tracking-wide">Distrito</label>
                <div class="relative">
                    <mat-icon
                        class="absolute left-3 top-2.5 text-neutral-400 !text-lg !w-6 !h-6 flex items-center justify-center leading-none">holiday_village</mat-icon>
                    <input type="text" formControlName="distrito" placeholder="Ej. Los Olivos"
                        class="w-full rounded-xl border bg-neutral-50 dark:bg-neutral-800 pl-10 pr-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-cyan-400 transition-all border-neutral-300 dark:border-neutral-700">
                </div>
            </div>

            <div class="space-y-1.5">
                <label class="text-xs font-bold text-neutral-500 uppercase tracking-wide">Calle / Av.</label>
                <div class="relative">
                    <mat-icon class="absolute left-3 top-2.5 text-neutral-400 !text-lg !w-6 !h-6 flex items-center justify-center leading-none">signpost</mat-icon>
                    <input type="text" formControlName="calle" placeholder="Ej. Av. Las Palmeras 123"
                        class="w-full rounded-xl border bg-neutral-50 dark:bg-neutral-800 pl-10 pr-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-cyan-400 transition-all border-neutral-300 dark:border-neutral-700">
                </div>
            </div>

            <div class="space-y-1.5">
                <label class="text-xs font-bold text-neutral-500 uppercase tracking-wide">Referencia</label>
                <div class="relative">
                    <mat-icon class="absolute left-3 top-3 text-neutral-400 !text-lg !w-6 !h-6 flex items-center justify-center leading-none">info</mat-icon>
                    <textarea formControlName="referencia" rows="2" placeholder="Ej. Frente al parque..."
                        class="w-full rounded-xl border bg-neutral-50 dark:bg-neutral-800 pl-10 pr-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-cyan-400 transition-all border-neutral-300 dark:border-neutral-700 resize-none"></textarea>
                </div>
            </div>

        </form>
    </div>

    <div
        class="px-6 py-4 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-50/50 dark:bg-neutral-900/50 flex justify-end gap-3 rounded-b-lg">
        <button type="button" (click)="dialogRef.close()"
            class="px-5 py-2.5 rounded-xl text-sm font-semibold text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 transition-colors">
            Cancelar
        </button>
        <button (click)="onSubmit()" [disabled]="form.invalid || loading"
            class="px-5 py-2.5 rounded-xl text-sm font-bold bg-cyan-400 dark:bg-cyan-300 text-neutral-900 shadow-lg shadow-cyan-500/20 hover:opacity-90 disabled:opacity-50 transition-all flex items-center gap-2">
            <span *ngIf="loading"
                class="animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"></span>
            Guardar
        </button>
    </div>
</div>